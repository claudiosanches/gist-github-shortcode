<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
<meta charset="UTF-8" />
<title>Add Gist</title>
<script src="../../../../wp-includes/js/jquery/jquery.js" type="text/javascript"></script>
<script src="../../../../wp-includes/js/tinymce/tiny_mce_popup.js" type="text/javascript"></script>
<script>
jQuery(document).ready(function($) {

    var Gist = {
        e: '',
        init: function(e) {
            Gist.e = e;
            tinyMCEPopup.resizeToInnerSize();
        },
        insert: function createGalleryShortcode(e) {

            var GistID = $('#gist-id').val();
            var GistFile = $('#gist-file').val();

            var output = '[gist';

            if (GistID) {
                output += ' id="' + GistID + '"';
            }

            if (GistFile) {
                output += ' file="' + GistFile + '"';
            }

            output += ']';

            tinyMCEPopup.execCommand('mceReplaceContent', false, output);

            tinyMCEPopup.close();
        }
    }
    tinyMCEPopup.onInit.add(Gist.init, Gist);

    $('#insert').click(function() {
        Gist.insert(Gist.e);
    });

});
</script>
</head>
<body>
    <form id="gist-form" action="#">
        <p>
            <label for="gist-id">ID:</label><br/>
            <input id="gist-id" type="text" value="" />
        </p>
        <p>
            <label for="gist-file">File:</label><br/>
            <input id="gist-file" type="text" value="" />
        </p>
        <p>
            <button id="insert">Add Gist</button>
        </p>
    </form>
</body>
</html>